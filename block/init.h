/**********************************************
	       Initialze Data
**********************************************/


 short int tempX,tempY;	
 short int ballRD;
 short int blcflag=0;
 short int stg_i = 0;
 static int KeyTable[128];
 unsigned char far *VGA_buffer = MK_FP(0x0A000,0);

struct Racket_Pos {
	int x;
	int y;
	int width;
	int height;
} racket;

struct Ball_Pos {
	int x;
	int y;
	int dx;
	int dy;
	int width;
	int height;
} ball;

struct Status_Data {
	int score;
	int score_count;
	int life;
	int block_total;
} status;

struct Block_Data {
	int x;
	int y;
	int width;
	int height;
	int status;
};


 extern struct Racket_Pos racket = {159,175,30,5};
 extern struct Ball_Pos ball = {171,169,2,2,6,6};
 extern struct Status_Data status = {0,1,3,0};

 extern struct Block_Data block[] = {
 {20,30,28,7,5},{55,30,28,7,5},
 {90,30,28,7,5},{125,30,28,7,5},
 {160,30,28,7,5},{195,30,28,7,5},
 {230,30,28,7,5},{265,30,28,7,5},

 {20,41,28,7,4},{55,41,28,7,4},
 {90,41,28,7,4},{125,41,28,7,4},
 {160,41,28,7,4},{195,41,28,7,4},
 {230,41,28,7,4},{265,41,28,7,4},

 {20,52,28,7,3},{55,52,28,7,3},
 {90,52,28,7,3},{125,52,28,7,3},
 {160,52,28,7,3},{195,52,28,7,3},
 {230,52,28,7,3},{265,52,28,7,3},

 {20,63,28,7,2},{55,63,28,7,2},
 {90,63,28,7,2},{125,63,28,7,2},
 {160,63,28,7,2},{195,63,28,7,2},
 {230,63,28,7,2},{265,63,28,7,2},

 {20,74,28,7,1},{55,74,28,7,1},
 {90,74,28,7,1},{125,74,28,7,1},
 {160,74,28,7,1},{195,74,28,7,1},
 {230,74,28,7,1},{265,74,28,7,1},
};




/***************************************************************************************
   			           Stage Data 
****************************************************************************************/

int stg[5][41] = {

		{0,0,0,0,0,0,0,0,	/* STAGE 1 */
		 4,4,4,4,4,4,4,4,
	  	 3,3,3,3,3,3,3,3,
		 2,2,2,2,2,2,2,2,
		 1,1,1,1,1,1,1,1,32},

		{0,0,0,0,0,0,0,0,	/* STAGE 2 */
		 0,0,0,0,0,0,0,0,
	  	 0,0,0,0,0,0,0,0,
		 0,0,0,0,0,0,0,0,
		 6,6,6,6,6,6,6,6,8},

		{1,1,1,1,1,1,1,1,	/* STAGE 3 */
		 2,2,2,2,2,2,2,2,
	  	 3,3,3,3,3,3,3,3,
		 4,4,4,4,4,4,4,4,
		 5,5,5,5,5,5,5,5,40},

		{5,2,3,4,4,3,2,5,	/* STAGE 4 */
		 1,2,3,4,4,3,2,1,
	  	 6,2,3,4,4,3,2,6,
		 1,2,3,4,4,3,2,1,
		 5,2,3,4,4,3,2,5,40},

		{6,6,6,6,6,6,6,6,	/* STAGE 5 */
		 6,6,6,6,6,6,6,6,
	  	 6,6,6,6,6,6,6,6,
		 6,6,6,6,6,6,6,6,
		 6,6,6,6,6,6,6,6,40},



};


unsigned char number[][52] = {

			{5,10,
			0,9,9,9,0,
			9,0,0,0,9,
			9,0,0,0,9,
			9,0,0,0,9,
			9,0,0,0,9,
			9,0,0,0,9,
			9,0,0,0,9,
			9,0,0,0,9,
			9,0,0,0,9,
			0,9,9,9,0,},


			{5,10,
			0,0,9,0,0,
			0,9,9,0,0,
			0,0,9,0,0,
			0,0,9,0,0,
			0,0,9,0,0,
			0,0,9,0,0,
			0,0,9,0,0,
			0,0,9,0,0,
			0,0,9,0,0,
			9,9,9,9,9,},


			{5,10,
			0,0,9,9,0,
			0,9,0,0,9,
			9,0,0,0,9,
			0,0,0,0,9,
			0,0,0,0,9,
			0,0,0,0,9,
			0,0,0,9,0,
			0,0,9,0,0,
			0,9,0,0,0,
			9,9,9,9,9,},

			{5,10,
			0,0,9,9,0,
			0,9,0,0,9,
			9,0,0,0,9,
			0,0,0,0,9,
			0,0,9,9,0,
			0,0,0,0,9,
			0,0,0,0,9,
			0,0,0,0,9,
			0,0,0,9,0,
			9,9,9,0,0,},

			{5,10,
			0,0,0,9,0,
			0,0,9,9,0,
			0,9,0,9,0,
			9,0,0,9,0,
			9,0,0,9,0,
			9,9,9,9,9,
			0,0,0,9,0,
			0,0,0,9,0,
			0,0,0,9,0,
			0,0,0,9,0,},

			{5,10,
			9,9,9,9,9,
			9,0,0,0,0,
			9,0,0,0,0,
			9,0,0,0,0,
			9,9,9,9,0,
			0,0,0,0,9,
			0,0,0,0,9,
			0,0,0,0,9,
			9,0,0,0,9,
			0,9,9,9,0,},


			{5,10,
			0,0,9,9,0,
			0,9,0,0,0,
			9,0,0,0,0,
			9,0,0,0,0,
			9,9,9,9,0,
			9,0,0,0,9,
			9,0,0,0,9,
			9,0,0,0,9,
			9,0,0,0,9,
			0,9,9,9,0,},

			{5,10,
			0,9,9,9,9,
			9,0,0,0,9,
			9,0,0,0,9,
			9,0,0,0,9,
			0,0,0,9,0,
			0,0,9,0,0,
			0,0,9,0,0,
			0,0,9,0,0,
			0,0,9,0,0,
			0,0,9,0,0,},

			{5,10,
			0,9,9,9,0,
			9,0,0,0,9,
			9,0,0,0,9,
			9,0,0,0,9,
			0,9,9,9,0,
			9,0,0,0,9,
			9,0,0,0,9,
			9,0,0,0,9,
			9,0,0,0,9,
			0,9,9,9,0,},

			{5,10,
			0,9,9,9,0,
			9,0,0,0,9,
			9,0,0,0,9,
			9,0,0,0,9,
			9,0,0,0,9,
			0,9,9,9,9,
			0,0,0,0,9,
			0,0,0,0,9,
			0,0,0,9,0,
			0,9,9,0,0,},
};

/***************************************************************************************
   			           Graphic Data 
****************************************************************************************/

unsigned char racket_pic[] = {30,5,
			  	 0, 0,14, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8,14, 0, 0,
				 0,14,14, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7,14,14, 0,
				14,14,14,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,14,14,14,
				 0,14,14, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7,14,14, 0,
				 0, 0,14, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8,14, 0, 0,};

unsigned char ball_pic[] = {6,6,
			      0, 0, 7, 7, 0, 0,
			      0, 7,15,15, 7, 0,
			      7,15,15,15,15, 7,
			      7,15,15,15,15, 7,
			      0, 7,15,15, 7, 0,
			      0, 0, 7, 7, 0, 0,};


/**********************************************************************************
			       Protocol Initilize
**********************************************************************************/


void interrupt (*Oldvect)();
void interrupt InKey(void);
void BDDraw (int x,int y,int width,int height,int status);
void Erase(int x,int y,unsigned char *ballpointer);
void Stage(void);
void VGA13h(void);
void VGA03h(void);
void Pset(int x,int y,int color);
void Toufu(int x,int y,int xsize, int ysize,int color);
void DDraw(int x,int y,unsigned char *ballpointer);
void Delete(int x,int y,unsigned char *ballpointer);
void VsyncWait(void);
void Wait(int t);
void Standby(void);
void Num(int x,int y,int num);
void Status(int index);
void Line(int x1,int y1,int x2,int y2,int color);
void Rect(int x1,int y1,int x3,int y3,int color);