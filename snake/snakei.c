#define RIGHT	2 
#define LEFT	4 
#define UP 	1
#define DOWN	3
#define sgn(x) ((x<0)?-1:((x>0)?1:0))
#define WALLL	19
#define WALLR	301
#define WALLT	19
#define WALLB	181
#define WALLW	281
#define WALLH	161


static int KeyTable[128];
extern int snake_style = 1;
extern int score = 0;
extern int sound_flag = 0;

extern struct Snake_Data {
	int x;
	int y;
	int w;
	int h;
	int col;
	int spd;
	int spd_count;
	int dst;
	int length;
	int gameover_flag;
};

extern struct Tail_Data {
	int x;
	int y;
	int w;
	int h;
	int col;
};

extern struct Random_Data {
	int flag;
	int x;
	int y;
	int w;
	int h;
	int col;
};

extern struct Snake_Data snake = {100,100,5,5,15,5,0,RIGHT,1,0};
extern struct Random_Data random = {1,0,0,5,5,15};
extern struct Tail_Data tail[] = {
	{0,0,5,5,15},{0,0,5,5,15},{0,0,5,5,15},{0,0,5,5,15},{0,0,5,5,15},
	{0,0,5,5,15},{0,0,5,5,15},{0,0,5,5,15},{0,0,5,5,15},{0,0,5,5,15},
	{0,0,5,5,15},{0,0,5,5,15},{0,0,5,5,15},{0,0,5,5,15},{0,0,5,5,15},
	{0,0,5,5,15},{0,0,5,5,15},{0,0,5,5,15},{0,0,5,5,15},{0,0,5,5,15},
	{0,0,5,5,15},{0,0,5,5,15},{0,0,5,5,15},{0,0,5,5,15},{0,0,5,5,15},
	{0,0,5,5,15},{0,0,5,5,15},{0,0,5,5,15},{0,0,5,5,15},{0,0,5,5,15},
	{0,0,5,5,15},{0,0,5,5,15},{0,0,5,5,15},{0,0,5,5,15},{0,0,5,5,15},
	{0,0,5,5,15},{0,0,5,5,15},{0,0,5,5,15},{0,0,5,5,15},{0,0,5,5,15},
	{0,0,5,5,15},{0,0,5,5,15},{0,0,5,5,15},{0,0,5,5,15},{0,0,5,5,15},
	{0,0,5,5,15},{0,0,5,5,15},{0,0,5,5,15},{0,0,5,5,15},{0,0,5,5,15},
	{0,0,5,5,15},{0,0,5,5,15},{0,0,5,5,15},{0,0,5,5,15},{0,0,5,5,15},
	{0,0,5,5,15},{0,0,5,5,15},{0,0,5,5,15},{0,0,5,5,15},{0,0,5,5,15},
	{0,0,5,5,15},{0,0,5,5,15},{0,0,5,5,15},{0,0,5,5,15},{0,0,5,5,15},
	{0,0,5,5,15},{0,0,5,5,15},{0,0,5,5,15},{0,0,5,5,15},{0,0,5,5,15},
	{0,0,5,5,15},{0,0,5,5,15},{0,0,5,5,15},{0,0,5,5,15},{0,0,5,5,15},
	{0,0,5,5,15},{0,0,5,5,15},{0,0,5,5,15},{0,0,5,5,15},{0,0,5,5,15},
	{0,0,5,5,15},{0,0,5,5,15},{0,0,5,5,15},{0,0,5,5,15},{0,0,5,5,15},
	{0,0,5,5,15},{0,0,5,5,15},{0,0,5,5,15},{0,0,5,5,15},{0,0,5,5,15},
	{0,0,5,5,15},{0,0,5,5,15},{0,0,5,5,15},{0,0,5,5,15},{0,0,5,5,15},
	{0,0,5,5,15},{0,0,5,5,15},{0,0,5,5,15},{0,0,5,5,15},{0,0,5,5,15},
};


/*******************************************************
			Graphic Data
*******************************************************/


unsigned char number[][52] = {

			{5,10,
			0,9,9,9,0,
			9,0,0,0,9,
			9,0,0,0,9,
			9,0,0,0,9,
			9,0,0,0,9,
			9,0,0,0,9,
			9,0,0,0,9,
			9,0,0,0,9,
			9,0,0,0,9,
			0,9,9,9,0,},


			{5,10,
			0,0,9,0,0,
			0,9,9,0,0,
			0,0,9,0,0,
			0,0,9,0,0,
			0,0,9,0,0,
			0,0,9,0,0,
			0,0,9,0,0,
			0,0,9,0,0,
			0,0,9,0,0,
			9,9,9,9,9,},


			{5,10,
			0,0,9,9,0,
			0,9,0,0,9,
			9,0,0,0,9,
			0,0,0,0,9,
			0,0,0,0,9,
			0,0,0,0,9,
			0,0,0,9,0,
			0,0,9,0,0,
			0,9,0,0,0,
			9,9,9,9,9,},

			{5,10,
			0,0,9,9,0,
			0,9,0,0,9,
			9,0,0,0,9,
			0,0,0,0,9,
			0,0,9,9,0,
			0,0,0,0,9,
			0,0,0,0,9,
			0,0,0,0,9,
			0,0,0,9,0,
			9,9,9,0,0,},

			{5,10,
			0,0,0,9,0,
			0,0,9,9,0,
			0,9,0,9,0,
			9,0,0,9,0,
			9,0,0,9,0,
			9,9,9,9,9,
			0,0,0,9,0,
			0,0,0,9,0,
			0,0,0,9,0,
			0,0,0,9,0,},

			{5,10,
			9,9,9,9,9,
			9,0,0,0,0,
			9,0,0,0,0,
			9,0,0,0,0,
			9,9,9,9,0,
			0,0,0,0,9,
			0,0,0,0,9,
			0,0,0,0,9,
			9,0,0,0,9,
			0,9,9,9,0,},


			{5,10,
			0,0,9,9,0,
			0,9,0,0,0,
			9,0,0,0,0,
			9,0,0,0,0,
			9,9,9,9,0,
			9,0,0,0,9,
			9,0,0,0,9,
			9,0,0,0,9,
			9,0,0,0,9,
			0,9,9,9,0,},

			{5,10,
			0,9,9,9,9,
			9,0,0,0,9,
			9,0,0,0,9,
			9,0,0,0,9,
			0,0,0,9,0,
			0,0,9,0,0,
			0,0,9,0,0,
			0,0,9,0,0,
			0,0,9,0,0,
			0,0,9,0,0,},

			{5,10,
			0,9,9,9,0,
			9,0,0,0,9,
			9,0,0,0,9,
			9,0,0,0,9,
			0,9,9,9,0,
			9,0,0,0,9,
			9,0,0,0,9,
			9,0,0,0,9,
			9,0,0,0,9,
			0,9,9,9,0,},

			{5,10,
			0,9,9,9,0,
			9,0,0,0,9,
			9,0,0,0,9,
			9,0,0,0,9,
			9,0,0,0,9,
			0,9,9,9,9,
			0,0,0,0,9,
			0,0,0,0,9,
			0,0,0,9,0,
			0,9,9,0,0,},
};

/*******************************************************
			Protocol
*******************************************************/

void Stage(void);
void StartDemo(void);
void Rect(int x1,int y1,int x3,int y3,int color);
void Rectf(int x1,int y1,int x3,int y3,int color);
void line_fast(int x1, int y1, int x2, int y2,int color);
void interrupt (*Oldvect)();
void Wait(int t);
void GameOver(void);
void StandBy(void);
void interrupt InKey(void);
void Num(int x,int y,int num);
void SoundOut(int Hz,int OutTime);